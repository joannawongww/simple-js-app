let pokemonRepository = function () { let t = []; function e(e) { "object" == typeof e && "name" in e ? t.push(e) : console.log("Pokemon is not correct!") } function n() { return t } function o(t) { return fetch(t.detailsUrl).then(function (t) { return t.json() }).then(function (e) { t.imageUrl = e.sprites.front_default, t.height = e.height, t.types = e.types }).catch(function (t) { console.error(t) }) } function i(t) { o(t).then(function () { r(t) }) } function r(t) { document.querySelector(".modal-title").innerText = t.name; document.querySelector(".pokemon-image").setAttribute("src", t.imageUrl); document.querySelector(".pokemon-height").innerText = "Height: " + t.height / 10 + "m" } return { add: e, getAll: n, addListItem: function t(e) { let n = document.querySelector(".pokemon-list"), o = document.createElement("li"); o.classList.add("list-group-item"); let r = document.createElement("button"); r.innerText = e.name, r.classList.add("btn"), r.setAttribute("data-toggle", "modal"), r.setAttribute("data-target", "#exampleModal"), o.appendChild(r), n.appendChild(o), r.addEventListener("click", function () { i(e) }) }, loadList: function t() { return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function (t) { return t.json() }).then(function (t) { t.results.forEach(function (t) { let n = { name: t.name, detailsUrl: t.url }; e(n), console.log(n) }) }).catch(function (t) { console.error(t) }) }, loadDetails: o, showDetails: i, showModal: r } }(); pokemonRepository.loadList().then(function () { pokemonRepository.getAll().forEach(function (t) { pokemonRepository.addListItem(t) }) });